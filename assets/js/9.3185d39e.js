(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{356:function(t,a,e){"use strict";e.r(a);var s=e(43),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"基于位置的ar（location-based）"}},[t._v("基于位置的AR（Location Based）")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://ar-js-org.github.io/AR.js-Docs/location-based/",target:"_blank",rel:"noopener noreferrer"}},[t._v("英文原地址"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("基于位置的 AR 功能仅限于 A-Frame 版框架。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://medium.com/chialab-open-source/build-your-location-based-augmented-reality-web-app-c2442e716564",target:"_blank",rel:"noopener noreferrer"}},[t._v("这篇文章"),e("OutboundLink")],1),t._v("让您对 AR.js 的基于位置的功能有初步的了解。它可以用于室内(但精度不高)和室外的 AR 内容定位。")]),t._v(" "),e("p",[t._v("您可以从 HTML 或 JavaScript 静态加载位置，也可以从本地/远程 JSON，或是通过调用 API 来加载数据。上面的文章中均有体现。")]),t._v(" "),e("p",[t._v("下面是 API 引用：")]),t._v(" "),e("h3",{attrs:{id:"gps-camera"}},[e("code",[t._v("gps-camera")]),t._v(" "),e("Badge",{attrs:{text:"required"}})],1),t._v(" "),e("p",[e("strong",[t._v("每个场景允许的最大值: 1")])]),t._v(" "),e("p",[t._v("该组件让位置 AR 成为可能。您必须将其设置为"),e("code",[t._v("carema")]),t._v("组件的属性。它可以处理相机的位置和旋转，还可以确定用户将他们的设备指向何处。")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-camera")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-camera")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rotation-reader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-camera")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("除此之外，正如您在上面的示例中看到的，我们还必须添加"),e("code",[t._v("rotation-reader")]),t._v("属性来处理旋转事件。参见"),e("a",{attrs:{href:"https://aframe.io/docs/0.9.0/components/camera.html#reading-position-or-rotation-of-the-camera",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),e("OutboundLink")],1),t._v("获取更多信息。")]),t._v(" "),e("h4",{attrs:{id:"属性"}},[t._v("属性")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("描述")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("alert")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("当 GPS 信号在小于"),e("code",[t._v("positionMinAccuracy")]),t._v("时是是否显示信息")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("false")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("positionMinAccuracy")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("位置信号所允许的最小精度")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("100")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("minDistance")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("如果设置了，则不会显示与用户之间的距离低于该值的位置。必须为正值。单位是米。")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0 表示禁用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("maxDistance")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("如果设置了该值，则不会显示与用户之间的距离高于该值的位置。必须为正值。单位是米。")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0 表示禁用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("simulateLatitude")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("设置相机要模拟的纬度值，以方便测试")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0 表示禁用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("simulateLongitude")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("设置相机要模拟的经度值，以方便测试")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0 表示禁用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("simulateAltitude")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("设置相机要模拟的海拔高度(以米为单位)，以方便测试")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0 表示禁用")])])])]),t._v(" "),e("h3",{attrs:{id:"gps-entity-place"}},[e("code",[t._v("gps-entity-place")]),t._v(" "),e("Badge",{attrs:{text:"required"}})],1),t._v(" "),e("p",[e("strong",[t._v("每个场景允许的最大值: 无限制")])]),t._v(" "),e("p",[t._v("该组件的让每个实体都可以追踪 GPS。这为实体分配了一个特定的世界位置，这样当用户的设备在现实世界中指向它的位置时，用户就可以看到它。如果用户离实体很远，它会看起来更小。如果它离得太远，就根本看不见了。")]),t._v(" "),e("p",[t._v("它需要纬度和经度作为单个字符串参数(示例：aframe的"),e("code",[t._v("a-box")]),t._v(")")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-box")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("material")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("color: yellow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-entity-place")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("latitude: <your-latitude>; longitude: <your-longitude>"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("⚡️ 另外，您可以使用 a-frame 的“position”参数指定一个 y 值来更改内容的高度。这个值应该高于或低于(如果为负值)当前相机高度，单位为米。举例来说，若设置为30米，则会在相对于 GPS 相机的当前高度显示：")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-box")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("material")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("color: yellow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-entity-place")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("latitude: <your-latitude>; longitude: <your-longitude>"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("position")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0 30 0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"属性-2"}},[t._v("属性")]),t._v(" "),e("p",[t._v("除一同定义的纬度和经度字符串外，并没有其他真正意义上的属性，如上所示。")]),t._v(" "),e("h2",{attrs:{id:"自定义属性"}},[t._v("自定义属性")]),t._v(" "),e("p",[t._v("下面是一些可以从"),e("code",[t._v("gps-entity-place")]),t._v("元素中检索的自定义属性：")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" distanceMsg "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[gps-entity-place]'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'distanceMsg'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("distanceMsg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "890 meters"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("自定义属性")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("distance")]),t._v(" "),e("td",[t._v("和用户之间的距离，随用户位置更新，单位是米")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("0")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("distanceMsg")]),t._v(" "),e("td",[t._v("和用户之间的距离的带单位的字符串，随每个用户的位置更新。值 "),e("code",[t._v("<distance> meters/kilometers")])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("''")])])])]),t._v(" "),e("h2",{attrs:{id:"事件"}},[t._v("事件")]),t._v(" "),e("p",[t._v("参见"),e("a",{attrs:{href:"/arjs-docs-zh-cn/routes/ui_and_event"}},[t._v("UI和事件部分")]),t._v("了解更多关于基于位置的自定义事件。")]),t._v(" "),e("p",[t._v("⚡️ 通常来说，在基于位置的情况下，让增强后的内容始终面向用户是一个很棒的主意。当你旋转摄像头时，3D模型、文本都是清晰可见的。")]),t._v(" "),e("p",[t._v("看看"),e("a",{attrs:{href:"https://github.com/AR-js-org/AR.js/tree/master/aframe/examples/location-based/always-face-user",target:"_blank",rel:"noopener noreferrer"}},[t._v("这个示例"),e("OutboundLink")],1),t._v("以创建总是面向用户(摄像头)"),e("code",[t._v("gps-entity-place")]),t._v("组件。")]),t._v(" "),e("h2",{attrs:{id:"投影相机版本"}},[t._v("投影相机版本")]),t._v(" "),e("p",[t._v("AR.js 中基于位置组件的实验性“投影相机”版本使用了"),e("a",{attrs:{href:"https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection",target:"_blank",rel:"noopener noreferrer"}},[t._v("球面墨卡托 Spherical Mercator"),e("OutboundLink")],1),t._v("(又叫：EPSG:3857)，用于存储相机、用户添加的感兴趣的点的位置和其他地理数据。")]),t._v(" "),e("p",[t._v("这个版本的基本原理是允许您轻松地添加更复杂的地理数据，比如道路和路径。这样数据就可以被投影并添加到 AR.js 场景中，然后由于球面墨卡托 单位和米类似(从离极点的位置算)，坐标可以直接使用 WebGL/A-Frame 的世界坐标。")]),t._v(" "),e("p",[t._v("投影相机版本的两个组件是"),e("code",[t._v("gps-projected-camera")]),t._v("和"),e("code",[t._v("gps-projected-entity-place")]),t._v("。它们的接口与"),e("code",[t._v("gps-camera")]),t._v("和"),e("code",[t._v("gps-entity-place")]),t._v("几乎相同，但内部工作方式不同。")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-camera")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-projected-camera")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rotation-reader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a-camera")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("和")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-box")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("color")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("yellow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-projected-entity-place")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("latitude: <your-latitude>; longitude: <your-longitude>"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("strong",[t._v("请注意，内部已经将经度和纬度转换为球面墨卡托坐标。")])]),t._v(" "),e("p",[t._v("对于"),e("code",[t._v("gps-entity-place")]),t._v("，您可以使用"),e("code",[t._v("position")]),t._v("属性设置 y 组件的高度。")]),t._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a-box")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("color")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("yellow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("gps-projected-entity-place")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("latitude: <your-latitude>; longitude: <your-longitude>"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("position")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0 30 0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"计算任意增强内容的世界坐标"}},[t._v("计算任意增强内容的世界坐标")]),t._v(" "),e("p",[e("code",[t._v("gps-projected-camera")]),t._v("拥有一些有用的属性和方法，可以很简单地处理任意的增强内容(例如，来自于 "),e("a",{attrs:{href:"https://openstreetmap.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenStreetMap"),e("OutboundLink")],1),t._v("等地理数据 API 的线条或多边形)。在介绍这些之前，有一点需要说明，在"),e("code",[t._v("gps-projected-camera")]),t._v("中，"),e("strong",[t._v("GPS 的原始位置")]),t._v("是世界的原点。因此，当我们要添加内容且该内容的源坐标是非投影(WG384)经纬度，那么您需要：")]),t._v(" "),e("ul",[e("li",[t._v("投影到球面墨卡托。")]),t._v(" "),e("li",[t._v("然后转换成相对于原始GPS位置的世界坐标。")])]),t._v(" "),e("p",[t._v("另一方面，如果源坐标已经被投影，那么只需要第二个步骤。现在来看看各个情况。")]),t._v(" "),e("h3",{attrs:{id:"资源数据为-wg384-经纬度"}},[t._v("资源数据为 WG384 经纬度")]),t._v(" "),e("p",[e("code",[t._v("gps-projected-camera")]),t._v("投影相机组件的"),e("code",[t._v("latLonToWorld(lat, lon)")]),t._v("方法直接将经度和纬度转换为世界坐标，第一步执行投影，然后根据投影坐标计算世界坐标。它将返回一个包含 x 值和 z值两个元素的世界坐标数组，允许开发者独立计算或指定 y 值坐标(高度)。")]),t._v(" "),e("h3",{attrs:{id:"资源数据为球面墨卡托坐标"}},[t._v("资源数据为球面墨卡托坐标")]),t._v(" "),e("p",[t._v("另一种情况是，增强的内容已经投影到球面墨卡托坐标，因此在添加到 AR.js 场景时就无需初步投影。例如，当 API 提供的是球面墨卡托的数据就可能发生这种情况。在这种情况下，我们仍然需要将球面墨卡托坐标转换为相对于原始GPS位置的世界坐标。"),e("code",[t._v("gps-projected-camera")]),t._v("拥有"),e("code",[t._v("originCoordsProjected")]),t._v("属性，它以球面墨卡托坐标表示原始GPS位置。这是一个长度为 2 的数组，分别包含从球形墨卡托原点开始计算的东方向和北方向。由此，我们可以从球面墨卡托坐标求出世界坐标:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("xWorld = featureEasting - originCoordsProjected[0]")])])]),t._v(" "),e("p",[t._v("以及")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("zWorld = -(featureNorthing - originCoordsProjected[1])")])])]),t._v(" "),e("p",[t._v("其中"),e("code",[t._v("xWorld")]),t._v("和"),e("code",[t._v("zWorld")]),t._v("为增强内容的"),e("code",[t._v("x")]),t._v("和"),e("code",[t._v("z")]),t._v("坐标，"),e("code",[t._v("featureEasting")]),t._v("和"),e("code",[t._v("featureNorthing")]),t._v("为球面墨卡托坐标。注意我们取了 z 值的相反数，因为在 OpenGL 坐标中，向东面移动增加 x，增加高度会增加 y，但向北移动则会"),e("strong",[t._v("减少")]),t._v(" z 值。")])])}),[],!1,null,null,null);a.default=n.exports}}]);